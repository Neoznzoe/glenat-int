(function(){function e(e){return Math.max(Math.min(e,1),0)}function t(e){var t=Math.max(0,Math.min(1,e));return Math.round(255*t)}function n(e){return"#"+e.map(function(e){return e.toString(16).padStart(2,"0")}).join("")}function r(e){var t=document.createElement("canvas");return t.className="finisher-canvas",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t}function o(e){var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function i(e,t){var n=Math.random();return e+(t-e)*n}function a(e){var t=Math.floor(Math.random()*e.length);return e[t]}function c(e,t){var n=Math.max(0,Math.min(1,e));return Math.round((1-n)*t)}function s(e,t){var n=e.getContext("2d");if(!n)return;var r=t.colors&&t.colors.background?u(t.colors.background):[249,37,31];n.clearRect(0,0,e.width,e.height);var o=n.createLinearGradient(0,0,e.width,e.height);var i=[r,[r[0],Math.min(255,r[1]+32),Math.min(255,r[2]+32)]];o.addColorStop(0,n(i[0]));o.addColorStop(1,n(i[1]));n.fillStyle=o,n.fillRect(0,0,e.width,e.height);var a=Math.max(1,Math.floor(t.count||4));for(var s=0;s<a;s++){var f=t.shapes&&t.shapes.length>0?a(t.shapes):"c";if(f!="c")continue;var l=i(t.size&&t.size.min?Math.max(10,t.size.min):220,t.size&&t.size.max?Math.max(t.size.min||10,t.size.max):640);var d=i(0,e.width);var v=i(0,e.height);var h=t.opacity&&typeof t.opacity.center=="number"?e(t.opacity.center):0.85;var p=t.opacity&&typeof t.opacity.edge=="number"?e(t.opacity.edge):0.1;var g=u(t.colors&&t.colors.particles&&t.colors.particles.length>0?a(t.colors.particles):"rgba(255,255,255,0.4)");var w=n.createRadialGradient(d,v,l*0.1,d,v,l);w.addColorStop(0,"rgba("+g.join(",")+","+h+")"),w.addColorStop(1,"rgba("+g.join(",")+","+p+")"),n.fillStyle=w,n.beginPath(),n.arc(d,v,l,0,Math.PI*2),n.fill()}n.globalCompositeOperation=t.blending||"overlay"}function u(e){if(Array.isArray(e))return e.length===3?e:[e[0]||0,e[1]||0,e[2]||0];if(typeof e!="string")return[249,37,31];var t=e.trim();if(t.startsWith("#")){var n=t.slice(1);if(n.length===3){return n.split("").map(function(e){return parseInt(e+e,16)})}if(n.length===6){return[n.slice(0,2),n.slice(2,4),n.slice(4,6)].map(function(e){return parseInt(e,16)})}}if(t.startsWith("rgb")){var r=t.replace(/rgba?\(|\)|\s/g,"").split(",").map(function(e){return parseInt(e,10)});return[r[0]||0,r[1]||0,r[2]||0]}return[249,37,31]}function f(e){this.config=e||{};this.targets=[];var t=document.querySelectorAll(".finisher-header");for(var n=0;n<t.length;n++){var i=t[n];var a=o(i);var c=r(i);i.style.position=i.style.position||"relative",i.style.overflow="hidden",i.appendChild(c),c.width=a.width,c.height=a.height,this.targets.push({host:i,canvas:c})}var s=this;this._resize=function(){s.render()},window.addEventListener("resize",this._resize),this.render()}f.prototype.render=function(){for(var e=0;e<this.targets.length;e++){var t=this.targets[e];if(!t.canvas.parentElement){continue}var n=o(t.host);if(n.width!==t.canvas.width||n.height!==t.canvas.height){t.canvas.width=n.width,t.canvas.height=n.height}try{s(t.canvas,this.config)}catch(r){console.error("FinisherHeader rendering error:",r)}}};f.prototype.destroy=function(){window.removeEventListener("resize",this._resize);for(var e=0;e<this.targets.length;e++){var t=this.targets[e];if(t.canvas&&t.canvas.parentElement){t.canvas.parentElement.removeChild(t.canvas)}}this.targets=[]};window.FinisherHeader=f})();
